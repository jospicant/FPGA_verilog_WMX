// Code generated by Icestudio 0.7.1w202109100309

`default_nettype none

//---- Top entity
module main (
 input vclk,
 output v58d645,
 output v7d2397,
 output [0:7] vinit
);
 wire w0;
 wire w1;
 wire w2;
 assign v58d645 = w0;
 assign v7d2397 = w1;
 assign w2 = vclk;
 main_vb35f32 vb35f32 (
  .PPM(w0),
  .PPM_I(w1),
  .clk(w2)
 );
 assign vinit = 8'b00000000;
endmodule

/*-------------------------------------------------*/
/*--   */
/*-- - - - - - - - - - - - - - - - - - - - - - - --*/
/*-- 
/*-------------------------------------------------*/

module main_vb35f32 (
 input clk,
 output PPM,
 output PPM_I
);
 reg[17:0] contador, puntero;
 reg[17:0] Canal_1;
 reg PPM, PPM_I;
 
 initial
     begin
     contador = 0;
     puntero = 0;
     PPM = 0;
     PPM_I = 1;
     Canal_1 = 24096;
     end
 
 always @(posedge clk)
     begin
     contador <= contador + 1; 
  
     if (contador == 240096) // Final de ciclo PPM de 20 mS
        begin
        contador <= 0; 
        puntero <= 0 ;
        end
    
     puntero =0;
     if (contador == 0)  // ON 1ยบ impulso
        begin
        PPM <= 1 ; PPM_I <= 0; 
        end
 
     puntero = puntero + 3614;
     if (contador ==  puntero)  // OFF 1ยบ impulso
        begin
        PPM <= 0 ; PPM_I <= 1; 
        end
     
     puntero = puntero + Canal_1;
     if (contador ==  puntero) // ON 2ยบ impulso
        begin
        PPM <= 1 ; PPM_I <= 0; 
        end
 
     puntero = puntero + 3614; 
     if (contador ==  puntero) // OFF 2ยบ impulso
        begin
        PPM <= 0 ; PPM_I <= 1; 
        end
 
 end
 
 
endmodule
